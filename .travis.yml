language: python

install:
- sudo apt-get -y install pandoc
- pip install pypandoc
- python setup.py develop

jobs:
  include:
    # check code formatting
    - python: "3.8"
      before_script:
      - pip install black
      script: black --check .
    # release (on tags only)
    - stage: Release
      if: tag IS present
      python: "3.8"
      script: echo "Releasing library to PyPI..."
      deploy:

      - provider: pypi
        on:
          repo: gdubicki/requests-extra
          tags: true
        user: gdubicki
        password:
          secure: "OBRSX/ph91rt8fS2N1QSv82nVNubBDZR7qYzLsmZ3aucBJ6GYxP32k+ImjIB10M9Pljs+T90GWud7zfw0VWJ8VMqxE0Af//DpYYdawcUoC9KXoo0MglJjZF/eMtWcQjwnxpvR8kolJZ31eTDJ33waO0X+sRyayNXpJ5VQg3jC9hyowWQNEHRKCJxsBLendDZOFOkIn808GOQeossK7iGi9Oqz8cDgEihQn+3mUcng7IcohfiJv1kQnVrbOSC64kVSCJOCBAb3ZZNjNK9KZY8ysWHiRwOALCPAV0SadFiDZzCAzxukMtUjBZN7ZhBvOBk0ZzjY5LI2P98UyXx0TGuxgnpFGUhReuBeUQc0bG17PBzlA6qCXnNkGt/MKnhQ2hqDooP4oatd3LcEL77Oe1YGz2qYZWWNlxMQtfhUjwusNlkzJeNnC1THYAZndzmBhs9QidclFhM5ujzQVTUbpD2fEvaXGY82RHH1GluRYN4ishl8iOcm99HeeRh3ZQWciDLjRvbeNaiNB6QUgr1my6Algpb2TKsMZi/BnBjImRaEeQdxfTtqHIlLQShXFrWVjvNvrbvI4jHkIDg39UCAxiXR/yE4GiVD5eZTJ580UzPrnboyfUXxkHD5aTf5tIugZtA5ojXwpdeUecUTPPPiEHYsI+vI+/7FEBm2bLgk1XfkFs="
        distributions: "sdist bdist_wheel"
